/** * 操作提示浮层 */define(['regularjs', '../3rd/anime.js'], function(Regular, anime) {    require('../../css/dialog.css');    var diglogTpl = Regular.extend({        name: 'diglogTpl',        data: {            pro: {                single: false,                singleCenter: true, //一个居中按钮                title: '标题妥妥',                confirmBtnText: '下一步啊',                confirmCallback: function() {                    alert('111')                },                cancelBtnText: '取消',                cancelCallback: function() {},                isAnimate: true, //是否有动画                isFull: false //是否添加溢出 == 5            }        },        template: '<div class="m-dialog">\                        <div class="m-over" id="over{pro.id}"></div>\                        <div class="dialog-main" id="dialog{pro.id}">\                            <h2 class="dialog-head">\                                <span class="title">{pro.title}</span>\                                <i class="icon-close" on-click={this.close()}>×</i>\                            </h2>\                            <div class="dialog-body">{#include this.$body}</div>\                            {#if !pro.singleCenter}\                            <div class="btn-group" r-hide={isFull}>\                                {#if !single}<button class="btn btn-cancel" on-click={this.cancelCallback()}>{pro.cancelBtnText}</button>{/if}\                                <button class="btn btn-ok" on-click={this.confirmCallback($event)}>{pro.confirmBtnText}</button>\                            </div>\                            {#else}\                            <div class="btn-group" r-hide={isFull}>\                                <button class="btn btn-center" on-click={this.confirmCallback($event)}>{pro.confirmBtnText}</button>\                            </div>\                            {/if}\                        </div>\                    </div>',        init: function() {            this.$update();            var self = this;            console.info('1111如果存在就重新开始动画');            setTimeout(function() {                self.show();            }, 0); //延时触发 否则无效果        },        test: function() {            console.info(9);            this.data.test1();        },        cancelCallback: function() {            this.data.pro.cancelCallback && this.data.pro.cancelCallback();            this.close();            //this.destroy();        },        confirmCallback: function() {            this.data.pro.confirmCallback && this.data.pro.confirmCallback();            this.close()                //this.destroy();        },        show: function() {            //document.getElementById('dialog' + this.data.pro.id).style.display = 'block';            if (this.data.pro.isAnimate) {                this.anmiateIn(1000);            } else {                this.anmiateIn(10);            }        },        close: function() {            console.info('l靠靠靠', this.data.pro)            if (this.data.pro.isAnimate) {                this.anmiateOut();            } else {                this.destroy();            }        },        /**         * 动画效果         */        anmiateIn: function(duration) {            console.info('如果存在就重新开始动画');            var relativeOffset = anime.timeline({                duration: duration            });            relativeOffset                .add({                    targets: '#dialog' + this.data.pro.id,                    easing: 'easeOutQuint',                    opacity: 1,                    offset: 0,                    translateY: 150                })                .add({                    targets: '#over' + this.data.pro.id,                    easing: 'easeOutQuint',                    offset: 0,                    opacity: 0.6                });        },        /**         * 动画效果         */        anmiateOut: function() {            var self = this;            var relativeOffset = anime.timeline();            relativeOffset                .add({                    targets: '#over' + this.data.pro.id,                    easing: 'easeOutQuint',                    offset: 0,                    opacity: 0,                    complete: function() {                        console.log('anime.easings')                        self.destroy(); //结束动画后销毁                    }                })                .add({                    targets: '#dialog' + this.data.pro.id,                    easing: 'easeOutQuint',                    offset: 0, //开始时间轴                    translateY: -850,                    opacity: 0,                    complete: function() {                        console.log(anime.easings)                        self.destroy(); //结束动画后销毁                    }                })        }    });    var dialog = Regular.extend({        name: 'Dialog',        template: '',        init: function() {            this.$update();            var self = this;            /*setTimeout(function() {                self.anmiateIn();            }, 0);//延时触发 否则无效果*/        },        delPhone: function() {            console.info('del')        }    });    return dialog;});