/** * 上左导航栏模板 */define(['regularjs', 'jquery', '../../javascript/base/util', '../../html/sliderbar/index.html', '../../javascript/widget/tip.js', '../../javascript/widget/dialog.js', '../../javascript/3rd/cookie.js', '../../javascript/base/const.js'], function(Regular, $, util, index, tip, dialog, cookie, api) {    require('../../css/sliderbar.css');    return Regular.extend({        name: 'sliderbarTpl',        template: index,        data: {            //登陆账户信息            user: {                nick: '',                icon: ''            },            pro: {}//外部传入的数据        },        init: function() {            console.info('pro',this.data);            this.data.user.nick = this.data.pro.nick;            this.data.user.icon = this.data.pro.icon;            var token = cookie.get('token');            console.info(token)            util.rest(api.USER.getAccountInfo, {                param: {},                method: 'post',                onload: function() {                    console.info('成功');                },                onerror: function() {                }            });        },        loginOut: function() {            var self = this;            //弹出框            var modifyDialog = new dialog({                data: {                    pro: {                        id: 'modifyDialog',                        single: false,                        title: '你是否确定要退出？',                        height: 'auto',                        confirmBtnText: '确定',                        confirmCallback: function() {                            util.rest(api.USER.logout, {                                method: 'post',                                onload: function(data) {                                    console.info('成功',data);                                },                                onerror: function() {                                    window.location.href = './login.html'                                }                            });                            //todo                            //window.location.href = './login.html'                        },                        cancelBtnText: '取消',                        cancelCallback: function() {}                    }                },                template: '<diglogTpl pro={pro}>\                            </diglogTpl>'            });            modifyDialog.$inject('body');        }    });}); 