define(['regularjs', 'jquery', '../../javascript/base/util', '../../html/login/index.html', '../../javascript/3rd/anime.js', '../../javascript/3rd/clipboard.js', '../../javascript/widget/tip.js', '../../javascript/3rd/cookie.js'], function(Regular, $, util, login, anime, Clipboard, tip, cookie) {    require('../../css/login.css')    return Regular.extend({        template: login,        data: {            //登陆账户密码            user: {                email: '',                pwd: '',                verifyCode: ''//图片验证码            },            show: {                check: false            }        },        init: function() {            this.initCtrol();            this.render();        },        /**         * 初始化控件         */        initCtrol: function() {            //提示框            this.tip = new tip();            this.tip.$inject('body');        },        render: function() {            console.info(1111,cookie.get('remember'))            if (cookie.get('remember')) {                this.data.show.check = true;                this.data.user.email = cookie.get('account');                this.$update();            }        },        /**         * 登录按钮点击         */        loginClick: function() {            if (this.data.show.check) {                cookie.set({                   remember: true,                   account: '94345432@qq.com'                });            } else {                cookie.remove('remember');            }            var result = this.verify();            if (result.error) {                this.tip.showError(result.errmsg);                return;            }            console.info('send', result);            //发送登录请求            util.rest('../login', {                param: result,                method: 'post',                onload: function() {                    console.info('成功');                },                onerror: function() {                    console.info('牺牲');                }            })        },        /**         * 获取图片验证码         * @return {[type]} [description]         */        getVerifyImg: function() {            var self = this;            //发送登录请求            util.rest('../getVerifyImg', {                param: 'data',                method: 'post',                onload: function(data) {                    console.info('成功');                    if (data && typeof data != undefined) {                        self.data.user.verifyCode = data;                    }                },                onerror: function(data) {                    console.info('牺牲');                    self.data.user.verifyCode = 'data';                    self.$update();                    self.tip.showError('获取验证失败，请点击重试');                }            })        },        /**         * 校验账号密码输入         */        verify: function() {            console.info(111, util.trim(this.data.user.email))            var regEmail = /^([\w-_]+(?:\.[\w-_]+)*)@((?:[a-z0-9]+(?:-[a-zA-Z0-9]+)*)+\.[a-z]{2,6})$/i;            if (!util.trim(this.data.user.email)) {                return {                    error: true,                    errmsg: '邮箱不能为空！'                }            }            if (!regEmail.test(util.trim(this.data.user.email))) {                return {                    error: true,                    errmsg: '邮箱格式错误'                }            }            if (!util.trim(this.data.user.pwd)) {                return {                    error: true,                    errmsg: '密码不能为空！'                }            }            //^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$            return {                email: this.data.user.email,                pwd: this.data.user.pwd            };        }    });});