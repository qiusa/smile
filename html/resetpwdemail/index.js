define(['regularjs', 'jquery', '../../javascript/base/util', '../../html/resetpwdemail/index.html', '../../javascript/widget/tip.js', '../../javascript/widget/dialog.js', '../../javascript/base/const.js', '../../html/loginnav/index.js'], function(Regular, $, util, index, tip, dialog, api) {    require('../../css/resetpwdemail.css')    return Regular.extend({        template: '<loginNav>' + index + '</loginNav>',        data: {            reset: {                account:'',                other: false//另一种渠道            }        },        init: function() {            console.info(tip, dialog)                //提示框            this.tip = new tip();            this.tip.$inject('body');            //获取url带的参数            this.data.reset.account = util.getQueryString('account');            this.data.reset.other = util.getQueryString('other');            this.$update();            console.info(this.data.reset.other)        },        /**         * 发送邮件按钮点击         */        sendEmail: function() {            var self = this;            if (!self.data.reset.account) {                self.tip.showError('无效链接');                return;            }            //发送邮箱请求            util.rest(api.USER.sendResetPasswordVerifyCode, {                param: {email: this.data.reset.account},                method: 'post',                onload: function() {                    console.info('成功');                    return                    if (data && typeof data != undefined) {                        //跳转带参数                        window.location.href = './resetpwdcode.html?type=email&account=' + self.data.reset.account;                    }                    //各类错误todo                },                onerror: function() {                    console.info('牺牲');                    window.location.href = './resetpwdcode.html?type=email&account=error' + self.data.reset.account;                }            })        },        /**         * 浏览器后退         */        goBack: function() {            history.back();        }    });});