define(['regularjs', 'jquery', '../../javascript/base/util', '../../html/resetpwdenter/index.html', '../../javascript/widget/tip.js', '../../javascript/widget/dialog.js', '../../html/loginnav/index.js'], function(Regular, $, util, index, tip, dialog) {    require('../../css/resetpwdenter.css')    return Regular.extend({        template: '<loginNav>' + index + '</loginNav>',        data: {            //登陆账户密码            reset: {                account: '',                type: '', //类型（phone or email）                pwd: '', //新密码                pwdSecond: '' //新密码            }        },        init: function() {            console.info(tip, dialog)                //提示框            this.tip = new tip();            this.tip.$inject('body');            //获取url带的参数            this.data.reset.account = util.getQueryString('account');            this.data.reset.type = util.getQueryString('type');        },        /**         * 提交按钮点击         */        submitClick: function() {            var self = this;            if (!self.data.reset.account) {                self.tip.showError('无效链接');                return;            }            var result = this.verify();            if (result.error) {                this.tip.showError(result.errmsg);                return;            }            console.info('send1', result);            //发送重置密码请求            util.rest('../resetpwd', {                param: result,                method: 'post',                onload: function() {                    console.info('成功');                    if (data && typeof data != undefined) {                        //跳转带参数                        window.location.href = './resetpwdsuccess.html?type=' + self.data.reset.type + '&account=' + self.data.reset.account;                    }                    //各类错误todo                },                onerror: function() {                    console.info('牺牲');                    //跳转带参数                    window.location.href = './resetpwdsuccess.html?type=' + self.data.reset.type + '&account=error' + self.data.reset.account;                }            })        },        /**         * 校验账号密码输入         */        verify: function() {            if (!util.trim(this.data.reset.pwd)) {                return {                    error: true,                    errmsg: '请输入新密码不能为空'                }            }            if (this.data.reset.pwd.length < 6 || this.data.reset.pwd.length > 16) {                return {                    error: true,                    errmsg: '请输入6-16位密码'                }            }            if (util.verify('pwd', this.data.reset.pwd)) {                return {                    error: true,                    errmsg: '密码需包含字母，数字，字符中至少两种格式'                }            }            if (!util.trim(this.data.reset.pwdSecond)) {                return {                    error: true,                    errmsg: '请再次输入密码不能为空'                }            }            if (this.data.reset.pwd != this.data.reset.pwdSecond) {                return {                    error: true,                    errmsg: '密码不一致'                }            }            return {                pwd: this.data.reset.pwd            };        }    });});